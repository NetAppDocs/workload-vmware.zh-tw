---
sidebar: sidebar 
permalink: upload-vm-inventory.html 
keywords: vm workloads, capture vm details 
summary: 您可以使用規劃中心上傳有關目前 VMware 環境的資訊。 
---
= 將虛擬機器庫存資料上傳至NetApp Workload Factory
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
在建立遷移計劃之前，您需要上傳虛擬機器庫存資料。

.步驟
. 使用以下方式之一登入 Workload Factory https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["主控台體驗"^] 。
. 從 VMware 工作負載圖塊中，選擇 *VMware 規劃中心*。
+
從規劃中心，您可以上傳虛擬機器庫存數據，查看先前的庫存資料上傳，並使用任何虛擬機器庫存資料集規劃遷移。

. 選擇*上傳虛擬機器清單*。
. 選擇要使用的資料收集方法：


[role="tabbed-block"]
====
.使用 RVTools （快速評估）
--
RVTools 是與 vCenter 和 ESX Server （ 5.x 至 8.0 ）互動的 Windows 應用程式、可擷取有關 VMware 虛擬環境的資訊。它會收集有關 VM 、 CPU 、記憶體、磁碟、叢集、 ESX 主機、資料存放區等。您可以將此資訊匯出至 xlsx 檔案、以便與移轉顧問搭配使用。

https://www.robware.net/home["深入瞭解 RVTools"^]

.步驟
. 選擇 *RVTools* 圖塊，然後選擇 *Next*。
+
隨即顯示「 * 準備 AWS Cloud 就職 * 」頁面。

. 輸入您將建立的 VM 清單資料集的名稱。
. 從下載並安裝 RVTools 4.4.2 或更新版本 https://www.robware.net/download["RVTools 網站"^]
. 啟動 RVTools 並登入目標 vCenter Server 。
+
這會擷取有關 vCenter Server 的資訊。

. 將您的 VMware 資訊匯出至 xlsx 或 xls 檔案。
+
如 https://resources.robware.net/resources/prod/RVTools.pdf["RVTools 文件"^]需詳細資訊、請參閱中的「命令列參數」一章。

. 選擇image:button-upload-file.png["上傳按鈕"]並選擇您匯出的 RVTools 檔案。
. 選擇*上傳*。
. 選擇*完成*。


--
.使用資料收集器（詳細規劃）
--
NetApp 移轉顧問 VM 收集器指令碼會從您的 vCenter 收集與 RVTools 所收集的類似的 VM 組態資訊、但它會擷取目前的 VM 效能資料、以提供實際的讀寫 IOPS 和處理量統計資料。您可以使用以下兩種模式之一的指令碼：

* 每小時資料收集
* 每日資料收集


您必須啟動移轉顧問、才能從 Codebox 視窗複製移轉顧問 VM 收集器指令碼。

.開始之前
執行收集器指令碼的系統必須符合下列需求：

* 必須安裝 Microsoft PowerShell 7.0 或更新版本。如果您需要安裝 PowerShell 、請參閱 https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell?view=powershell-7.4["Microsoft PowerShell 文件"^] 。
* 必須安裝 VMware PowerCLI 。如果您需要安裝 PowerCLI 、請參閱 https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.esxi.install.doc/GUID-F02D0C2D-B226-4908-9E5C-2E783D41FE2D.html["VMware PowerCLI 文件"^] 。
* 必須停用 SSL 憑證檢查。
* PowerShell 必須允許執行未簽署的指令碼。


請注意、如果您計畫從虛擬機器擷取長期統計資料（每日統計資料）、則必須在 vSphere 管理主控台（ VMware 管理環境）中啟用第 3 級或更高層級的統計資料。

.步驟
. 選擇“*資料收集器*”圖塊，然後選擇“*下一步*”。
+
代碼方塊視窗會出現在頁面右側。

. 在 Codebox 視窗中，選取image:button-download-codebox.png["下載按鈕"]以將移轉顧問資料收集器指令碼（名為「 list-VMs.ps1 」）儲存至目標系統，或選取image:button-copy-codebox.png["複製按鈕"]以複製指令碼，以便將其貼到適當的系統上。
. 請依照下列步驟擷取目前虛擬機器的組態：
+
.. 登入您下載資料收集器的系統、並在其中安裝 PowerShell 和 PowerCLI 。
.. 執行下列命令以連線至 VMware vCenter 伺服器：
+
[source, console]
----
Connect-VIServer -server <server_IP>
----
+
將 <server_IP> 取代為 VMware 伺服器的 IP 位址或主機名稱。

.. 執行您下載的資料收集器指令碼，並指定「每小時」或「每日」 VM 統計資料的資料收集選項。
+
[source, console]
----
./list-vms.ps1 -PerformanceStatisticsTimePeriod <LastHour | LastDay>
----
+
其中：

+
*** 過去 1 小時的 IOPS 與處理量資料會以 20 秒的間隔收集。
*** *LastDAY* 收集過去 24 小時的 IOPS 和處理量資料，每隔 5 分鐘。




+
您也可以選擇執行資料收集器指令碼，而不指定任何選項；如此可讓您從互動式功能表中選取資料收集期間。

+
+ 腳本在目前工作目錄中輸出名稱中帶有時間戳記的壓縮檔案。  .zip 檔案包含所有虛擬機器及其屬性的列表，以及它們的 IOPS 和吞吐量資料。

. 選擇*上傳*。


--
.使用 NetApp 資料基礎架構洞見（詳細規劃）
--
NetApp 資料基礎架構洞見是一種雲端基礎架構監控工具，可讓您清楚掌握完整的基礎架構。您需要啟用移轉顧問與 Data Infrastructure Insights 之間的暫時性 API 通訊，以便移轉顧問收集有關 VMware 基礎架構的資訊。

https://docs.netapp.com/us-en/data-infrastructure-insights/["深入瞭解 Data Infrastructure Insights"^]

.步驟
. 選擇「*Data Infrastructure Insights*」圖塊並選擇「*下一步*」。
+
隨即顯示「 * 準備 AWS Cloud 就職 * 」頁面。

. 輸入您將建立的 VM 清單資料集的名稱。
. 輸入Data Infrastructure Insights的租戶端點。
+
這應該是您用來存取 Data Infrastructure Insights 的 URL 。

. 如果您尚未產生 Data Infrastructure Insights 的 API 存取權杖，請依照頁面上的指示建立。否則，請將您的 API 存取權杖貼到 * 輸入 API 存取權杖 * 文字方塊中。
. 選擇*上傳*。
+
工作負載工廠從Data Infrastructure Insights收集資訊。



--
====
.接下來呢？
從規劃中心管理您上傳的虛擬機器庫存數據，或建立部署計畫。

* link:explore-planning-center.html["探索 VMware 工作負載規劃中心"]
* link:launch-onboarding-advisor.html["建立 Amazon VMware Cloud 部署計劃"]
* link:launch-migration-advisor-evs.html["建立 Amazon Elastic VMware Service 部署計劃"]
* link:launch-onboarding-advisor-native.html["建立 Amazon EC2 部署計劃"]

